<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€å†¯ç¨³å®šç›ˆåˆ©äº¤æ˜“ç³»ç»Ÿ | æš—é»‘ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-card: #21262d;
            --bg-input: #0d1117;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --border-color: #30363d;
            
            /* æŸ”å’Œé…è‰² */
            --accent-green: #3fb950;
            --accent-blue: #58a6ff;
            --accent-purple: #a371f7;
            --accent-red: #f85149;
            --accent-yellow: #d29922;
            --accent-orange: #db6d28;
            --accent-cyan: #39c5cf;
            
            --glow-green: 0 0 12px rgba(63, 185, 80, 0.15);
            --glow-blue: 0 0 12px rgba(88, 166, 255, 0.15);
            
            /* è¡¨æ ¼é…è‰² */
            --table-header-bg: #161b22;
            --table-header-text: #c9d1d9;
            --table-border: #21262d;
            --table-hover: #22272e;
        }

        body {
            font-family: 'JetBrains Mono', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px 20px;
            background: linear-gradient(135deg, rgba(63, 185, 80, 0.08) 0%, rgba(88, 166, 255, 0.08) 100%);
            border-radius: 16px;
            border: 1px solid var(--border-color);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 0.95em;
            letter-spacing: 1px;
        }

        /* èµ·å§‹æœ¬é‡‘ç¼–è¾‘ */
        .capital-edit {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 12px 20px;
            background: var(--bg-card);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .capital-edit label {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .capital-edit input {
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            color: var(--accent-green);
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: 600;
            width: 150px;
            text-align: center;
            margin: 0;
        }

        .capital-edit input:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: var(--glow-green);
        }

        /* å¡ç‰‡ */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            max-width: 1440px;
            margin-left: auto;
            margin-right: auto;
        }

        .card h2 {
            color: var(--accent-green);
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.85em;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: 600;
        }

        .positive {
            color: var(--accent-green);
        }

        .negative {
            color: var(--accent-red);
        }

        /* è¿›åº¦æ¡ */
        .progress-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .progress-label {
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .progress-bar {
            background: var(--bg-primary);
            border-radius: 8px;
            height: 32px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan));
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-primary);
            font-weight: 600;
            font-size: 1em;
            transition: width 0.3s ease;
        }

        /* æ ¸å¿ƒè§„åˆ™ - å››åˆ—å¸ƒå±€ */
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        @media (max-width: 1200px) {
            .rules-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .rules-grid {
                grid-template-columns: 1fr;
            }
        }

        .rule-box {
            background: var(--bg-secondary);
            padding: 18px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .rule-box h3 {
            color: var(--accent-blue);
            margin-bottom: 12px;
            font-size: 1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .rule-item {
            margin-bottom: 10px;
            padding-left: 18px;
            position: relative;
            color: var(--text-primary);
            font-size: 0.9em;
            line-height: 1.5;
        }

        .rule-item:before {
            content: "â–¹";
            position: absolute;
            left: 3px;
            color: var(--accent-green);
        }

        .rule-item:last-child {
            margin-bottom: 0;
        }

        .highlight {
            background: rgba(210, 153, 34, 0.1);
            border: 1px solid var(--accent-yellow);
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            font-size: 0.9em;
        }

        .highlight strong {
            color: var(--accent-yellow);
        }

        /* äº¤æ˜“è¡¨å• */
        .trade-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .trade-form label {
            display: block;
            margin-bottom: 6px;
            color: var(--text-secondary);
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        input, select {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.2s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: var(--glow-blue);
        }

        input[readonly] {
            color: var(--text-secondary);
            background: var(--bg-secondary);
        }

        /* æŒ‰é’® */
        .btn {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            color: var(--bg-primary);
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'JetBrains Mono', monospace;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--glow-green);
        }

        .btn-small {
            padding: 6px 15px;
            font-size: 0.85em;
        }

        .btn-danger {
            background: var(--accent-red);
        }

        .btn-danger:hover {
            box-shadow: 0 0 12px rgba(248, 81, 73, 0.3);
        }

        /* è¡¨æ ¼ */
        .table-container {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-secondary);
        }

        th {
            background: var(--table-header-bg);
            color: var(--table-header-text);
            padding: 12px 10px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--table-border);
        }

        td {
            padding: 12px 10px;
            border-bottom: 1px solid var(--table-border);
            color: var(--text-primary);
            font-size: 0.9em;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--table-hover);
        }

        td input {
            width: 80px;
            padding: 6px 8px;
            text-align: center;
        }

        /* æ£€æŸ¥æ¸…å• - ä¸¤åˆ— */
        .checklist {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        @media (max-width: 768px) {
            .checklist {
                grid-template-columns: 1fr;
            }
        }

        .checklist-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checklist-item:hover {
            border-color: var(--accent-green);
        }

        .checklist-item input {
            width: 18px;
            height: 18px;
            margin: 0;
            margin-right: 12px;
        }

        .checklist-item label {
            flex: 1;
            cursor: pointer;
            font-size: 0.9em;
        }

        .checklist-item.completed {
            opacity: 0.4;
            text-decoration: line-through;
        }

        /* æç¤ºæ¡† */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 4px solid;
            margin-bottom: 15px;
        }

        .alert-success {
            background: rgba(63, 185, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .alert-warning {
            background: rgba(210, 153, 34, 0.1);
            border-color: var(--accent-yellow);
            color: var(--accent-yellow);
        }

        .alert-danger {
            background: rgba(248, 81, 73, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border: 1px solid var(--border-color);
        }

        .modal-content h3 {
            color: var(--accent-blue);
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .modal-content textarea {
            width: 100%;
            min-height: 120px;
            margin-bottom: 20px;
            padding: 12px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            resize: vertical;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* å­˜å‚¨æç¤º */
        .subtitle {
            color: var(--text-secondary);
            font-size: 0.85em;
            text-align: center;
            margin-top: 10px;
            padding: 0;
            background: none;
            border: none;
        }

        .storage-info {
            background: rgba(63, 185, 80, 0.08);
            border: 1px solid var(--accent-green);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.85em;
            color: var(--accent-green);
            text-align: center;
        }

        /* HHå½¢æ€æ€»åˆ†ç»“æ„æ ·å¼ */
        .hh-main-title {
            background: linear-gradient(135deg, rgba(63, 185, 80, 0.15), rgba(88, 166, 255, 0.15));
            border: 2px solid var(--accent-green);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .hh-main-title h2 {
            color: var(--accent-green);
            font-size: 1.5em;
            margin-bottom: 10px;
            justify-content: center;
        }

        .hh-main-description {
            color: var(--text-primary);
            font-size: 1em;
            line-height: 1.8;
            margin-bottom: 15px;
            text-align: left;
        }

        .hh-main-description strong {
            color: var(--accent-yellow);
        }

        .hh-warning-box {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid var(--accent-red);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.95em;
        }

        .hh-warning-box strong {
            color: var(--accent-red);
        }

        .hh-subsection {
            margin-top: 20px;
            padding: 15px;
            background: rgba(88, 166, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(88, 166, 255, 0.3);
            min-height: 280px;
}

        .hh-subsection h3 {
            color: var(--accent-blue);
            font-size: 1.1em;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(88, 166, 255, 0.3);
        }

        .hh-subsection .rule-item {
            margin-bottom: 8px;
        }

        .hh-application {
            margin-top: 20px;
            padding: 18px;
            background: rgba(210, 153, 34, 0.1);
            border: 2px solid var(--accent-yellow);
            border-radius: 12px;
        }

        .hh-application h3 {
            color: var(--accent-yellow);
            font-size: 1.2em;
            margin-bottom: 15px;
        }
    
        /* äº¤æ˜“è®¡ç®—å™¨æ ·å¼ */
        .trade-calculation-result {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid var(--accent-blue);
        }
        .calculation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .calc-item {
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        .calc-label {
            color: var(--text-secondary);
            font-size: 0.85em;
            margin-bottom: 8px;
        }
        .calc-value {
            font-size: 1.3em;
            font-weight: 600;
        }
        .calc-value.positive {
            color: var(--accent-green);
        }
        .calc-value.negative {
            color: var(--accent-red);
        }
        .calculation-warning {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.95em;
        }
        .calculation-warning.warning {
            background: rgba(210, 153, 34, 0.1);
            border: 1px solid var(--accent-yellow);
            color: var(--accent-yellow);
        }
        .calculation-warning.success {
            background: rgba(63, 185, 80, 0.1);
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
        }
        .calculation-warning.danger {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid var(--accent-red);
            color: var(--accent-red);
        }

    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>âš¡ è€å†¯ç¨³å®šç›ˆåˆ©äº¤æ˜“ç³»ç»Ÿ âš¡</h1>
            <p>ä¿å®ˆæ–¹æ¡ˆ | å‘¨æ”¶ç›Š3.5% | é«˜èƒœç‡å½¢æ€ | å–å‡ºâ‰¥2R</p>
        </div>

        <!-- 1. æ ¸å¿ƒäº¤æ˜“è§„åˆ™ -->
        <div class="card">
            <h2>ğŸ“œ æ ¸å¿ƒäº¤æ˜“è§„åˆ™</h2>
            
            <div class="rules-grid">
                <div class="rule-box">
                    <h3>ğŸ’° èµ„é‡‘ç®¡ç†</h3>
                    <div class="rule-item">å•ç¬”ä»“ä½ï¼š10-12.5%</div>
                    <div class="rule-item">æ­¢æŸå¹…åº¦ï¼š-8%</div>
                    <div class="rule-item">å•ç¬”é£é™©ï¼šâ‰¤1%</div>
                    <div class="rule-item">åŒæ—¶æŒä»“ï¼š4-6åª</div>
                    <div class="rule-item">æ€»ä»“ä½ï¼š50-75%</div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ“Š é€‰è‚¡æ ‡å‡†</h3>
                    <div class="rule-item">æˆäº¤é¢ï¼š>10äº¿</div>
                    <div class="rule-item">ä¼˜å…ˆï¼š20cmä¸ªè‚¡</div>
                    <div class="rule-item">çƒ­é—¨æ¿å—å‰æ’</div>
                    <div class="rule-item">æµé€šå¸‚å€¼ï¼š50-200äº¿</div>
                    <div class="rule-item">è§‚å¯ŸæœŸï¼šâ‰¥3å¤©</div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ¯ ä¹°å…¥ç­–ç•¥</h3>
                    <div class="rule-item">HHä¹°ç‚¹ï¼šçªç ´æ˜¨æ—¥é«˜ç‚¹</div>
                    <div class="rule-item">ç›˜ä¸­ä¹°å…¥ï¼šç¡®å®šæ€§ä¼˜å…ˆ</div>
                    <div class="rule-item">å¿«é€Ÿåˆ¤æ–­ï¼ˆ30ç§’ï¼‰</div>
                    <div class="rule-item">æ¿å—ä¸Šæ¶¨ âœ“</div>
                    <div class="rule-item">ä¸ªè‚¡å¼ºåŠ¿ âœ“</div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ“¤ å–å‡ºç­–ç•¥</h3>
                    <div class="rule-item">ç›®æ ‡ï¼šâ‰¥2Rï¼ˆ2å€é£é™©ï¼‰</div>
                    <div class="rule-item">+1%ï¼šå…³æ³¨æ­¢ç›ˆ</div>
                    <div class="rule-item">+2%ï¼šå–å‡ºä¸€åŠ</div>
                    <div class="rule-item">+3%ï¼šå…¨éƒ¨æ­¢ç›ˆ</div>
                    <div class="highlight">
                        <strong>ä¿å®ˆç­–ç•¥ï¼š</strong><br>
                        å°èµšï¼ˆ1-2%ï¼‰+ é«˜èƒœç‡ + â‰¥2Ræ­¢ç›ˆ
                    </div>
                </div>
            
                <div class="rule-box">
                    <h3>ğŸ¯ ä¸‰ä½ä¸€ä½“ï¼ˆæ ¸å¿ƒæ€æƒ³ï¼‰</h3>
                    <div class="rule-item"><strong>è´¦æˆ·ï¼š</strong>æ˜¯å¦èµšé’±ï¼Ÿé”å®šåˆ©æ¶¦ï¼Ÿå¯è°ƒèŠ‚ä»“ä½ï¼Ÿ</div>
                    <div class="rule-item"><strong>ä»“ä½ï¼š</strong>å½“å‰æ€»ä»“ä½ï¼Ÿé£é™©æ•å£ï¼Ÿå®‰å…¨å¸¦ï¼Ÿ</div>
                    <div class="rule-item"><strong>ä¸ªè‚¡ï¼š</strong>å½¢æ€æ ‡å‡†ï¼Ÿä¹°ç‚¹æ˜ç¡®ï¼Ÿç›ˆäºæ¯”ï¼Ÿ</div>
                    <div class="rule-item"><strong>âš ï¸ æ ¸å¿ƒæ³•åˆ™ï¼š</strong>æ‰€æœ‰è§„åˆ™å¿…é¡»åŒ¹é…è¿™ä¸‰æ–¹é¢</div>
                    <div class="highlight">
                        <strong>ä¸‰ä½ä¸€ä½“è®­ç»ƒè¶Šå¤šï¼Œç›˜ä¸­æ§åˆ¶åŠ›è¶Šå¼ºï¼</strong><br>
                        âœ“ è´¦æˆ·çŠ¶æ€å†³å®šä¹°å…¥èƒ†é‡<br>
                        âœ“ ä»“ä½ç®¡ç†å†³å®šå®‰å…¨ç¨‹åº¦<br>
                        âœ“ ä¸ªè‚¡è´¨é‡å†³å®šæˆåŠŸæ¦‚ç‡<br>
                        â†’ çœ¼ç•Œé«˜äº†ï¼Œæ ¼å±€ä¹Ÿå°±æ‰“å¼€äº†
                    </div>
                </div></div>
        </div>

        <!-- 2. HHä¹°å…¥å½¢æ€å›¾è§£ï¼ˆæ€»åˆ†ç»“æ„ï¼‰ -->
        <div class="card">
            <!-- ä¸»æ ‡é¢˜éƒ¨åˆ† -->
            <div class="hh-main-title">
                <h2>ğŸ¨ HHä¹°ç‚¹ï¼šåŸåˆ™ä¸Šçš„ä¹°å…¥æ³•</h2>
                <div class="hh-main-description">
                    <div class="rule-item"><strong>æ ¸å¿ƒå®šä¹‰ï¼š</strong>å»ºä»“å½¢æ€å‡ºç° â†’ çªç ´æ˜¨æ—¥é«˜ç‚¹ â†’ ç›˜ä¸­ä¹°å…¥</div>
                    <div class="rule-item"><strong>é‡è¦è¯´æ˜ï¼š</strong>é˜³é˜´é˜³å’ŒåŒåº•éƒ½æ˜¯<strong>HHçš„ç‰¹æ®Šå½¢æ€</strong>ï¼Œä¸æ˜¯ç‹¬ç«‹çš„ä¹°å…¥æ³•ï¼</div>
                    <div class="rule-item"><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>æ‰€æœ‰å¸‚åœºç¯å¢ƒï¼ˆè¶‹åŠ¿å¸‚+éœ‡è¡å¸‚ï¼‰</div>
                    <div class="rule-item"><strong>çˆ†å‘æ€§ï¼š</strong>ä¸­ç­‰ï¼ˆç¡®å®šæ€§é«˜ï¼‰</div>
                </div>
                <div class="hh-warning-box">
                    <strong>âš ï¸ å‡åˆ†é¡¹ï¼š</strong>å°¾ç›˜å‡ºHHå±äº<strong>å¼±åŠ¿ä¿¡å·</strong>ï¼Œæ˜¯å‡åˆ†é¡¹ï¼Œä¸æ˜¯æœ€ä½³ä¹°ç‚¹ï¼
                </div>
            </div>

            <div class="rules-grid">
                <!-- å­æ¨¡å—1ï¼šé˜³é˜´é˜³ -->
                <div class="hh-subsection">
                    <h3>â­â­â­â­ å­æ¨¡å—1ï¼šé˜³é˜´é˜³ï¼ˆä¸»å‡æµªä¸“ç”¨ï¼‰</h3>
                    <div class="rule-item"><strong>å®šä½ï¼š</strong>HHçš„ç‰¹æ®Šå½¢æ€ï¼Œä¸æ˜¯ç‹¬ç«‹ä¹°æ³•</div>
                    <div class="rule-item"><strong>å®šä¹‰ï¼š</strong>å¤§é˜³æ¶¨åœ â†’ é˜´çº¿è°ƒæ•´ â†’ å†å¤§é˜³ï¼ˆå°¾ç›˜ç¡®è®¤ï¼‰</div>
                    <div class="rule-item"><strong>âš ï¸ ä½¿ç”¨åœºæ™¯ï¼š</strong>æ¿å—ä¸»å‡æµªé˜¶æ®µï¼ˆå¿…é¡»ï¼ï¼‰</div>
                    <div class="rule-item"><strong>ğŸ’¥ çˆ†å‘æ€§ï¼š</strong>æå¼ºï¼ˆä¸»å‡æµªåˆ©å™¨ï¼‰</div>
                    <div class="rule-item"><strong>ğŸ“‹ æ ‡å‡†7æ¡æ£€æŸ¥ï¼š</strong></div>
                    <div class="rule-item">â–¡ ç¬¬ä¸€æ ¹å¤§é˜³æ¶¨åœ âœ“</div>
                    <div class="rule-item">â–¡ é˜´æ˜¯é˜³çº¿ä¸”å®ä½“å° âœ“</div>
                    <div class="rule-item">â–¡ æ— é•¿ä¸Šä¸‹å½±çº¿ âœ“</div>
                    <div class="rule-item">â–¡ é˜´ç ´å‰é«˜ âœ“</div>
                    <div class="rule-item">â–¡ é˜´é‡å¤§ âœ“</div>
                    <div class="rule-item">â–¡ æ¿å—æŒç»­ä¸Šæ¶¨ï¼ˆå¼ºåˆ¶ï¼‰âœ“</div>
                    <div class="rule-item">â–¡ æˆäº¤é¢>8äº¿ âœ“</div>
                    <div class="rule-item"><strong>âš ï¸ å‡åˆ†é¡¹ï¼š</strong>å°¾ç›˜ç¡®è®¤ä¹°å…¥ï¼ˆ14:30åï¼‰</div>
                    <div class="highlight">
                        <strong>æ­¢æŸæ­¢ç›ˆï¼š</strong><br>
                        â€¢ æ­¢æŸï¼šç¬¬ä¸€æ ¹å¤§é˜³åº•éƒ¨<br>
                        â€¢ æ­¢ç›ˆï¼šæ¬¡æ—¥å¤§é˜³å³ç»“æŸ
                    </div>
                </div>

                <!-- å­æ¨¡å—2ï¼šåŒåº• -->
                <div class="hh-subsection">
                    <h3>â­â­â­ å­æ¨¡å—2ï¼šåŒåº•/å¤æ‚å›è°ƒï¼ˆéœ‡è¡å¸‚ï¼‰</h3>
                    <div class="rule-item"><strong>å®šä½ï¼š</strong>HHçš„ç‰¹æ®Šå½¢æ€ï¼Œä¸æ˜¯ç‹¬ç«‹ä¹°æ³•</div>
                    <div class="rule-item"><strong>å®šä¹‰ï¼š</strong>æ°´å¹³æ”¯æ’‘ä½ â†’ æ­¢è·Œä¿¡å· â†’ å°¾ç›˜ä¹°å…¥</div>
                    <div class="rule-item"><strong>âš ï¸ ä½¿ç”¨åœºæ™¯ï¼š</strong>éœ‡è¡å¸‚ã€å¤æ‚å›è°ƒæœŸ</div>
                    <div class="rule-item"><strong>ğŸ’¥ çˆ†å‘æ€§ï¼š</strong>å¼±äºé˜³é˜´é˜³ï¼ˆé«˜èƒœç‡ä½ç›ˆäºæ¯”ï¼‰</div>
                    <div class="rule-item"><strong>ğŸ“‹ è¯†åˆ«4ç§å½¢æ€ï¼š</strong></div>
                    <div class="rule-item">â–¡ ç¼©é‡å°Kçº¿</div>
                    <div class="rule-item">â–¡ å•Kçº¿ååŒ…</div>
                    <div class="rule-item">â–¡ Uå‹åè½¬ï¼ˆå¯æ˜æ˜Ÿï¼‰</div>
                    <div class="rule-item">â–¡ å¤åˆå¤´è‚©åº•</div>
                    <div class="rule-item"><strong>ğŸ“‹ ä¹°å…¥å‰æ£€æŸ¥ï¼š</strong></div>
                    <div class="rule-item">â–¡ å·²å½¢æˆæ˜ç¡®æ°´å¹³æ”¯æ’‘</div>
                    <div class="rule-item">â–¡ å‡ºç°æ­¢è·ŒKçº¿ä¿¡å·</div>
                    <div class="rule-item">â–¡ å½“å‰æ˜¯éœ‡è¡å¸‚ç¯å¢ƒ</div>
                    <div class="rule-item"><strong>âš ï¸ å‡åˆ†é¡¹ï¼š</strong>å°¾ç›˜ä¹°å…¥ï¼ˆå¢åŠ èƒœç‡ï¼‰</div>
                    <div class="highlight">
                        <strong>ç‰¹ç‚¹ï¼š</strong><br>
                        âœ“ å±äºå¤æ‚å›è°ƒå½¢æ€<br>
                        âœ“ çˆ†å‘æ€§ä¸å¦‚é˜³é˜´é˜³<br>
                        âœ“ é«˜èƒœç‡ä½ç›ˆäºæ¯”<br>
                        âœ“ æ­¢æŸï¼šæ”¯æ’‘ä½ä¸‹æ–¹
                    </div>
                </div>

                <!-- å­æ¨¡å—3ï¼šæ ‡å‡†HHæ£€æŸ¥æ¸…å• -->
                <div class="rule-box">
                    <h3>â­â­â­â­â­ æ ‡å‡†HHä¹°å…¥æ£€æŸ¥æ¸…å•</h3>
                    <div class="rule-item"><strong>ğŸ“‹ ä¹°å…¥å‰å¿…æŸ¥6é¡¹ï¼š</strong></div>
                    <div class="rule-item">â–¡ å·²è®¾ç½®HHä»·æ ¼é¢„è­¦ï¼ˆæ˜¨é«˜+0.01ï¼‰</div>
                    <div class="rule-item">â–¡ é¢„è­¦å·²è§¦å‘</div>
                    <div class="rule-item">â–¡ æ¿å—å½“æ—¥ä¸Šæ¶¨ âœ“</div>
                    <div class="rule-item">â–¡ ä¸ªè‚¡æ”¾é‡å¼ºåŠ¿ âœ“</div>
                    <div class="rule-item">â–¡ è´¦æˆ·æœªè¶…é£æ§ï¼ˆä»“ä½<75%ï¼‰</div>
                    <div class="rule-item">â–¡ å•ç¬”é£é™©â‰¤1% âœ“</div>
                    <div class="highlight">
                        <strong>ä¼˜ç‚¹ï¼š</strong><br>
                        âœ“ ä¹°ç‚¹æ˜ç¡®<br>
                        âœ“ ç›˜ä¸­ä¹°å…¥ï¼Œå½“æ—¥ç›ˆåˆ©<br>
                        âœ“ é¢‘ç‡é«˜ï¼Œæœºä¼šå¤š<br>
                        âœ“ é€‚åˆæ‰€æœ‰å¸‚åœº
                    </div>
                    <div style="background: rgba(248, 81, 73, 0.1); border: 1px solid var(--accent-red); padding: 12px; border-radius: 8px; margin-top: 12px; font-size: 0.9em;">
                        <strong style="color: var(--accent-red);">âš ï¸ é‡è¦ï¼šååŒ…Kçº¿åŠ›åº¦</strong><br>
                        â€¢ HHä¿¡å·Kçº¿å¦‚æœæ˜¯<strong>å°å®ä½“</strong> â†’ ååŒ…åŠ›åº¦ä¸å¤Ÿ<br>
                        â€¢ éœ€ç»“åˆå¤§ç›˜å’Œæ¿å—<strong>è°¨æ…è€ƒè™‘</strong><br>
                        â€¢ ååŒ…Kçº¿ = <strong>åŒKçº¿åè½¬</strong><br>
                        â€¢ å®ä½“è¶Šå¤§ï¼Œç¡®å®šæ€§è¶Šé«˜
                    </div>
                </div>

                <!-- å­æ¨¡å—4ï¼šå½¢æ€é€‰æ‹©ç­–ç•¥ -->
                <div class="rule-box">
                    <h3>ğŸ“ å½¢æ€é€‰æ‹©ç­–ç•¥æ€»ç»“</h3>
                    <div class="rule-item"><strong>è¶‹åŠ¿å¸‚ï¼ˆä¸»å‡æµªï¼‰ï¼š</strong></div>
                    <div class="rule-item">â€¢ æ ‡å‡†HHï¼ˆä¸»åŠ›ï¼‰- ä¸­ç­‰çˆ†å‘æ€§</div>
                    <div class="rule-item">â€¢ é˜³é˜´é˜³ï¼ˆè¶…å¼ºï¼‰âš¡ - æå¼ºçˆ†å‘æ€§</div>
                    <div class="rule-item">â€¢ åŒåº•ï¼ˆå°‘ç”¨ï¼‰- çˆ†å‘æ€§å¼±</div>
                    <div class="rule-item"><strong>éœ‡è¡å¸‚ï¼ˆå¤æ‚å›è°ƒï¼‰ï¼š</strong></div>
                    <div class="rule-item">â€¢ æ ‡å‡†HHï¼ˆä¸»åŠ›ï¼‰- ä¸­ç­‰çˆ†å‘æ€§</div>
                    <div class="rule-item">â€¢ åŒåº•/æ­¢è·ŒKçº¿ï¼ˆé€‚åˆï¼‰- é«˜èƒœç‡ä½ç›ˆäºæ¯”</div>
                    <div class="rule-item">â€¢ é˜³é˜´é˜³ï¼ˆç¦ç”¨ï¼‰âš ï¸</div>
                    <div class="highlight">
                        <strong>çˆ†å‘æ€§æ’åï¼š</strong><br>
                        ğŸ¥‡ é˜³é˜´é˜³ï¼ˆä¸»å‡æµªï¼‰> ğŸ¥ˆ æ ‡å‡†HH > ğŸ¥‰ åŒåº•/æ­¢è·ŒKçº¿<br><br>
                        <strong>è€å†¯åŸè¯ï¼š</strong><br>
                        "æˆ‘ç°åœ¨åŸºæœ¬å°±ä¸‰ç§å»ºä»“å½¢æ€ï¼šåŒåº•ï¼ˆåŒ…æ‹¬å¾®å‹åŒåº•ï¼‰ï¼Œæ ‡å‡†é˜³é˜´é˜³ï¼Œå˜ç§é˜³é˜´é˜³ã€‚"
                    </div>
                </div>
            </div>

            <!-- åº”ç”¨éƒ¨åˆ† -->
            <div class="hh-application">
                <h3>ğŸ’¡ åº”ç”¨ç­–ç•¥æ€»ç»“</h3>
                <div class="rules-grid" style="grid-template-columns: repeat(2, 1fr);">
                    <div>
                        <div class="rule-item"><strong>1. è¯†åˆ«å¸‚åœºç¯å¢ƒï¼š</strong></div>
                        <div class="rule-item">â€¢ ä¸»å‡æµª â†’ ä¼˜å…ˆé˜³é˜´é˜³</div>
                        <div class="rule-item">â€¢ éœ‡è¡å¸‚ â†’ ä¼˜å…ˆåŒåº•</div>
                        <div class="rule-item">â€¢ ä¸ç¡®å®š â†’ æ ‡å‡†HH</div>
                    </div>
                    <div>
                        <div class="rule-item"><strong>2. é¿å…å‡åˆ†é¡¹ï¼š</strong></div>
                        <div class="rule-item">â€¢ å°½é‡ç›˜ä¸­ä¹°å…¥HH</div>
                        <div class="rule-item">â€¢ å°¾ç›˜HHéœ€é™ä½ä»“ä½</div>
                        <div class="rule-item">â€¢ æ£€æŸ¥ååŒ…Kçº¿åŠ›åº¦</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. å–å‡ºç­–ç•¥è¯¦è§£ -->
        <div class="card">
            <h2>ğŸ“¤ å–å‡ºç­–ç•¥è¯¦è§£</h2>
            
            <div class="rules-grid">
                <div class="rule-box">
                    <h3>ğŸ¯ å–å‡ºäº”å¤§ä¼˜å…ˆçº§</h3>
                    <div class="rule-item"><strong>1. è´¦æˆ·æ›²çº¿ç®¡ç† â­â­â­â­â­</strong></div>
                    <div class="rule-item">å½“æ—¥å¤§æ¶¨>3-5%ï¼šåˆ†æ‰¹æ­¢ç›ˆ</div>
                    <div class="rule-item">åˆ©æ¶¦å›æ’¤10%ï¼šç«‹å³å–å‡º</div>
                    <div class="rule-item">ç¡®ä¿å½“å¤©æ”¶çº¢</div>
                    <div class="rule-item"><strong>2. é«˜ä½è‚¡ä¼˜å…ˆå–å‡º</strong></div>
                    <div class="rule-item">è¿œç¦»æ”¯æ’‘ä½</div>
                    <div class="rule-item"><strong>3. æ¿ç ¸å¼ºåŠ¿å–å‡º</strong></div>
                    <div class="rule-item">æ¿å—æ‰¹é‡è·Œåœ</div>
                    <div class="rule-item"><strong>4. å¤§ç›˜å…±æŒ¯å‚è€ƒ</strong></div>
                    <div class="rule-item">ä¸‰è¿é˜´å‡†å¤‡åå¼¹</div>
                    <div class="rule-item"><strong>5. åˆ†æ—¶é¡¶éƒ¨å½¢æ€</strong></div>
                    <div class="rule-item">å†²é«˜å›è½/äºŒæ¬¡å›è¸©</div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ“Š ç¥å¥‡æ•°å­—æ­¢ç›ˆæ³•</h3>
                    <div class="rule-item"><strong>å››ä¸ªç¥å¥‡æ•°å­—ï¼š</strong></div>
                    <div class="rule-item">7% - é¦–ä¸ªæ­¢ç›ˆç‚¹</div>
                    <div class="rule-item">10% - æ ‡å‡†æ­¢ç›ˆç‚¹</div>
                    <div class="rule-item">15% - ä¹è§‚æ­¢ç›ˆç‚¹</div>
                    <div class="rule-item">20% - æœ€é«˜æ­¢ç›ˆç‚¹</div>
                    <div class="highlight">
                        <strong>æ“ä½œè¦ç‚¹ï¼š</strong><br>
                        âœ“ éš”æ—¥æ­¢ç›ˆ<br>
                        âœ“ æ¿ç ¸æ˜¯æœ€å¥½çš„å¼ºåŠ¿å–å‡º<br>
                        âœ“ è¾¾åˆ°å³èµ°ï¼Œä¸è´ª
                    </div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ“‰ åŠ¨æ€æ­¢æŸæ³•</h3>
                    <div class="rule-item"><strong>ç¡¬æ­¢æŸï¼š-5%/-8%</strong></div>
                    <div class="rule-item">å¤§é˜³çº¿åº•éƒ¨è®¾æ­¢æŸ</div>
                    <div class="rule-item"><strong>8%ç¡¬æ­¢æŸå¤„ç†ï¼š</strong></div>
                    <div class="rule-item">è·Œåˆ°-6%ï¼šå–ä¸€åŠ</div>
                    <div class="rule-item">å¦ä¸€åŠ-10%å–å‡º</div>
                    <div class="rule-item">(é˜²æ­¢è¢«æ´—ç›˜)</div>
                    <div class="highlight">
                        <strong>å…³é”®ï¼š</strong><br>
                        âœ“ æ­¢æŸå¿…é¡»æ‰§è¡Œ<br>
                        âœ“ ä¿æŠ¤æœ¬é‡‘ç¬¬ä¸€<br>
                        âœ“ å•ç¬”æœ€å¤§äº1%
                    </div>
                </div>

                <div class="rule-box">
                    <h3>â° å½“æ—¥åˆ†æ—¶æ­¢ç›ˆ</h3>
                    <div class="rule-item"><strong>åˆ†æ—¶å›¾æ ‡è®°ï¼š</strong></div>
                    <div class="rule-item">æ˜¨æ—¥å¼€ç›˜ä»·</div>
                    <div class="rule-item">æ˜¨æ—¥æœ€é«˜ä»·</div>
                    <div class="rule-item"><strong>æ“ä½œæ ‡å‡†ï¼š</strong></div>
                    <div class="rule-item">æ—©ç›˜æ”¾é‡æ‹‰å‡çªç ´å¼€ç›˜ä»·</div>
                    <div class="rule-item">æœªçªç ´æ˜¨é«˜ä¹Ÿæœªåˆ°7%</div>
                    <div class="rule-item">åœ¨5%æ¶¨å¹…é™„è¿‘æ­¢ç›ˆ</div>
                    <div class="highlight">
                        <strong>è­¦æƒ•ä¿¡å·ï¼š</strong><br>
                        âœ— å†²é«˜å›è½<br>
                        âœ— äºŒæ¬¡å›è¸©åˆ†æ—¶çº¿<br>
                        âœ— æ— é‡æ‹‰å°¾ç›˜ï¼ˆæ¬¡æ—¥å¿…è·Œï¼‰
                    </div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ”¥ ç‰¹æ®Šå–å‡ºåœºæ™¯</h3>
                    <div class="rule-item"><strong>1. æŒ‡æ•°æ¶¨+è´¦æˆ·è·Œ</strong></div>
                    <div class="rule-item">é€†åŠ¿äºé’±ï¼šæ¢è‚¡çº é”™</div>
                    <div class="rule-item">åˆ‡å…¥æ¿å—æœ€å¼ºé¾™å¤´</div>
                    <div class="rule-item"><strong>2. æŒ‡æ•°æ¶¨+è´¦æˆ·å¹³</strong></div>
                    <div class="rule-item">æŒè‚¡ä¸åŠ¨ï¼ˆå»¶è¿Ÿæ»¡è¶³ï¼‰</div>
                    <div class="rule-item"><strong>3. æ¿å—å…±æŒ¯å¯åŠ¨æ—¥</strong></div>
                    <div class="rule-item">æœ‰åˆ©æ¶¦å«ï¼šé‡ä»“å‡ºå‡»</div>
                    <div class="rule-item"><strong>4. å¿«é€Ÿæ‹‰å‡è¿œç¦»æ”¯æ’‘</strong></div>
                    <div class="rule-item">5%æ¶¨å¹…å³è€ƒè™‘æ­¢ç›ˆ</div>
                </div>

                <div class="rule-box">
                    <h3>ğŸ’¡ æ­¢æŸ/æ­¢ç›ˆæ¯”ä¾‹</h3>
                    <div class="rule-item"><strong>æ­¢æŸæ ‡å‡†ï¼š</strong></div>
                    <div class="rule-item">-5%ï¼šç¡¬æ­¢æŸ</div>
                    <div class="rule-item">-8%ï¼šæœ€å¤§æ­¢æŸ</div>
                    <div class="rule-item">åŠ¨æ€è°ƒæ•´åˆ°ç›ˆäºå¹³è¡¡</div>
                    <div class="rule-item"><strong>æ­¢ç›ˆç›®æ ‡ï¼š</strong></div>
                    <div class="rule-item">â‰¥2Rï¼ˆ2å€é£é™©ï¼‰</div>
                    <div class="rule-item">å°èµš1-2%+é«˜èƒœç‡</div>
                    <div class="highlight">
                        <strong>æ ¸å¿ƒæ³•åˆ™ï¼š</strong><br>
                        ä¸Šæ¶¨æ—¶å¤§ä»“ä½åœ¨é«˜æ³¢åŠ¨<br>
                        ä¸‹è·Œæ—¶å¤§ä»“ä½åœ¨ä½æ³¢åŠ¨
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. è´¦æˆ·æ¦‚è§ˆ -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">ğŸ“Š è´¦æˆ·æ¦‚è§ˆ</h2>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <label style="color: var(--text-secondary); font-size: 0.85em;">èµ·å§‹æœ¬é‡‘ï¼š</label>
                    <input type="number" id="initialCapitalInput" value="40000" step="1000" 
                           style="width: 120px; padding: 6px 10px; margin: 0;">
                    <button class="btn btn-small" onclick="saveInitialCapital()">ğŸ’¾ æ›´æ–°æœ¬é‡‘</button>
                </div>
            </div>
            
            <div class="stats-grid">
<div class="stat-item">
                    <div class="stat-label">å½“å‰å¸‚å€¼</div>
                    <div class="stat-value" id="currentValue">Â¥40,000</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">æ€»ç›ˆäº</div>
                    <div class="stat-value" id="totalPnL">Â¥0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">æ”¶ç›Šç‡</div>
                    <div class="stat-value" id="totalReturn">0.00%</div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-label">ğŸ¯ ç›®æ ‡è¿›åº¦ï¼š4ä¸‡ â†’ 20ä¸‡</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%">0%</div>
                </div>
            </div>
        </div>


        <!-- 5. æ¯æ—¥æ”¶ç›Šæ›²çº¿ & 6. å†¯æ€»æœˆåº¦ç›®æ ‡ (å¹¶æ’å¸ƒå±€) -->
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px; align-items: stretch;">
                    <!-- 5. æ¯æ—¥æ”¶ç›Šæ›²çº¿ -->
        <div class="chart-container">
            <h2>ğŸ“ˆ æ¯æ—¥æ”¶ç›Šæ›²çº¿</h2>
            <div class="chart-wrapper">
                <canvas id="profitChart"></canvas>
            </div>
            <p class="subtitle">ğŸ’¡ ç‚¹å‡»æŠ˜çº¿ç‚¹å¯æŸ¥çœ‹/ç¼–è¾‘å½“æ—¥ç›ˆäºåŸå› </p>
        </div>
                    <!-- 6. å†¯æ€»æœˆåº¦ç›®æ ‡ -->
        <div class="card" style="max-width: 100%; margin: 0; padding: 20px;">
            <h2 style="font-size: 1.2em; margin-bottom: 15px;">ğŸ¯ å†¯æ€»æœˆåº¦ç›®æ ‡</h2>
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; background: var(--bg-secondary);">
                    <thead>
                        <tr style="background: var(--accent-blue);">
                            <th style="padding: 12px; color: #c9d1d9; text-align: center;; font-size: 0.8em;">æœˆä»½</th>
                            <th style="padding: 12px; color: #c9d1d9; text-align: center;">è®¡åˆ’æœˆæ”¶ç›Š</th>
                            <th style="padding: 12px; color: #c9d1d9; text-align: center;">ç´¯è®¡æ”¶ç›Š</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">1æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+20%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">120%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">2æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+15%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">138%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">3æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+20%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">166%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">4æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+20%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">199%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">5æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+15%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">229%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">6æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+25%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">286%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">7æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+25%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">357%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">8æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+25%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">446%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">9æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+20%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">536%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">10æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+15%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">616%</td></tr>
                        <tr><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border);">11æœˆ</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-green);">+20%</td><td style="padding: 10px; text-align: center; border-bottom: 1px solid var(--table-border); color: var(--accent-cyan);">739%</td></tr>
                        <tr><td style="padding: 10px; text-align: center;">12æœˆ</td><td style="padding: 10px; text-align: center; color: var(--accent-green);">+20%</td><td style="padding: 10px; text-align: center; color: var(--accent-cyan); font-weight: 600;">887%</td></tr>
                    </tbody>
                </table>
            </div>
            
        </div>
        </div>

        <!-- 7. äº¤æ˜“è®°å½• -->
        <div class="card">
            <h2>ğŸ“ äº¤æ˜“è®°å½•</h2>
            
            <div class="trade-form">
                <div>
                    <label>è‚¡ç¥¨åç§°</label>
                    <input type="text" id="stockName" placeholder="ABCç§‘æŠ€">
                </div>
                <div>
                    <label>ä¹°å…¥ä»·æ ¼</label>
                    <input type="number" id="buyPrice" placeholder="10.50" step="0.01" oninput="calculatePlan()">
                </div>
                <div>
                    <label>æ­¢æŸä»·æ ¼</label>
                    <input type="number" id="stopLoss" placeholder="9.66" step="0.01" oninput="calculatePlan()">
                </div>
                <div>
                    <label>å®é™…æ­¢ç›ˆä»·</label>
                    <input type="number" id="actualTargetPrice" placeholder="å®é™…æ­¢ç›ˆä»·æ ¼" step="0.01">
                </div>
                <div>
                    <label>ç›ˆäºé‡‘é¢</label>
                    <input type="number" id="profitLossAmount" placeholder="å®é™…ç›ˆäºé‡‘é¢" step="100">
                </div>
                <div>
                    <label>æŠ•å…¥é‡‘é¢</label>
                    <input type="number" id="investAmount" placeholder="5000" step="100" oninput="calculatePlan()">
                </div>
            </div>

            <!-- ç›ˆäºæ¯”è®¡ç®—ç»“æœ -->
            <div class="trade-calculation-result" id="tradeResult" style="display: none;">
                <div class="calculation-grid">
                    <div class="calc-item">
                        <div class="calc-label">é¢„è®¡è‚¡æ•°</div>
                        <div class="calc-value" id="calcShares">-</div>
                    </div>
                    <div class="calc-item">
                        <div class="calc-label">æ¯è‚¡é£é™©</div>
                        <div class="calc-value" id="calcRisk">-</div>
                    </div>
                    <div class="calc-item">
                        <div class="calc-label">æ­¢æŸé‡‘é¢</div>
                        <div class="calc-value negative" id="calcLoss">-</div>
                    </div>
                    <div class="calc-item">
                        <div class="calc-label">æ­¢ç›ˆé‡‘é¢</div>
                        <div class="calc-value positive" id="calcProfit">-</div>
                    </div>
                    <div class="calc-item">
                        <div class="calc-label">ç›ˆäºæ¯”</div>
                        <div class="calc-value" id="calcR">-</div>
                    </div>
                    <div class="calc-item">
                        <div class="calc-label">è´¦æˆ·é£é™©</div>
                        <div class="calc-value" id="calcRiskPct">-</div>
                    </div>
                </div>
                <div class="calculation-warning" id="calcWarning"></div>
            </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; color: var(--accent-green);">äº¤æ˜“åˆ—è¡¨</h3>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-small" onclick="submitTrade()">âœ… æäº¤äº¤æ˜“è®¡åˆ’</button>
                <button class="btn btn-small btn-danger" onclick="clearAllTrades()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰äº¤æ˜“</button>
            </div>
        </div>
        <div class="table-container">
                <table id="tradeTable">
                    <thead>
                        <tr>
                            <th>æ—¥æœŸ</th>
                            <th>ä»£ç </th>
                            <th>åç§°</th>
                            <th>ä¹°å…¥ä»·</th>
                            <th>è‚¡æ•°</th>
                            <th>æˆæœ¬</th>
                            <th>ä»“ä½</th>
                            <th>å½“å‰ä»·</th>
                            <th>å¸‚å€¼</th>
                            <th>ç›ˆäº</th>
                            <th>ç›ˆäº%</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="tradeList"></tbody>
                </table>
            </div>

            <div class="storage-info">ğŸ’¾ æ‰€æœ‰æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</div>
        </div>

        <!-- 8. æ¯æ—¥æ£€æŸ¥æ¸…å• -->
        <div class="card">
            <h2>âœ… æ¯æ—¥äº¤æ˜“æ£€æŸ¥æ¸…å•</h2>
            
            <div class="checklist">
                <div class="checklist-item">
                    <input type="checkbox" id="check1" onchange="toggleCheck(this)">
                    <label for="check1">æ£€æŸ¥è´¦æˆ·çŠ¶æ€ï¼ˆå¸‚å€¼ã€ä»“ä½ã€ç›ˆäºï¼‰</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check2" onchange="toggleCheck(this)">
                    <label for="check2">è®¾ç½®HHä»·æ ¼é¢„è­¦ï¼ˆ3-5åªï¼‰</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check3" onchange="toggleCheck(this)">
                    <label for="check3">è‡ªé€‰è‚¡è§‚å¯Ÿ3å¤©ä»¥ä¸Š</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check4" onchange="toggleCheck(this)">
                    <label for="check4">æˆäº¤é¢>10äº¿ âœ“</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check5" onchange="toggleCheck(this)">
                    <label for="check5">æ¿å—å½“æ—¥ä¸Šæ¶¨ âœ“</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check6" onchange="toggleCheck(this)">
                    <label for="check6">ä¸ªè‚¡æ”¾é‡å¼ºåŠ¿ âœ“</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check7" onchange="toggleCheck(this)">
                    <label for="check7">å•ç¬”é£é™©â‰¤1% âœ“</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check8" onchange="toggleCheck(this)">
                    <label for="check8">å·²è®¾ç½®æ­¢æŸ-8% âœ“</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check9" onchange="toggleCheck(this)">
                    <label for="check9">å·²è®¾ç½®æ­¢ç›ˆ+1%/+2%/+3%</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check10" onchange="toggleCheck(this)">
                    <label for="check10">ä»Šæ—¥æœªè¶…é£æ§ âœ“</label>
                </div>
            </div>

            <button class="btn" onclick="resetChecklist()" style="margin-top: 15px;">ğŸ”„ é‡ç½®æ¸…å•ï¼ˆæ–°çš„ä¸€å¤©ï¼‰</button>
        </div>

        <!-- 9. ç³»ç»Ÿæç¤º -->
        <div class="card">
            <h2>ğŸ’¡ ç³»ç»Ÿæç¤º</h2>
            <div id="systemAlert"></div>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div class="modal" id="noteModal">
        <div class="modal-content">
            <h3 id="modalTitle">ğŸ“ å½“æ—¥ç›ˆäºåŸå› </h3>
            <textarea id="noteTextarea" placeholder="è®°å½•ä»Šæ—¥ç›ˆäºçš„åŸå› ï¼Œä¾‹å¦‚ï¼š&#10;- æŸåªè‚¡ç¥¨å¤§æ¶¨ï¼Œè´¦æˆ·æ•´ä½“æ”¶ç›Š+2%&#10;- å¤§ç›˜è°ƒæ•´ï¼Œè´¦æˆ·å›æ’¤-1%&#10;- æ–°å¼€ä»“è‚¡ç¥¨è¢«æ­¢æŸï¼ŒäºæŸ-0.5%&#10;- æŒæœ‰è‚¡ç¥¨é›†ä½“ä¸Šæ¶¨ï¼Œ+3%"></textarea>
            <div class="modal-buttons">
                <button class="btn" onclick="saveNote()">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-danger" onclick="closeModal()">âœ• å…³é—­</button>
            </div>
        </div>
    </div>

    <script>
        // æ•°æ®å­˜å‚¨
        let trades = JSON.parse(localStorage.getItem('trades')) || [];
        let dailyData = JSON.parse(localStorage.getItem('dailyData')) || [];
        let initialCapital = parseFloat(localStorage.getItem('initialCapital')) || 40000;
        let weekStartCapital = parseFloat(localStorage.getItem('weekStartCapital')) || initialCapital;
        let profitChart = null;

        // åˆå§‹åŒ–

        // è®¡ç®—äº¤æ˜“è®¡åˆ’
        function calculatePlan() {
            const buyPrice = parseFloat(document.getElementById('buyPrice').value) || 0;
            const stopLoss = parseFloat(document.getElementById('stopLoss').value) || 0;
            const targetPrice = parseFloat(document.getElementById('targetPrice').value) || 0;
            const amount = parseFloat(document.getElementById('investAmount').value) || 0;
            
            const resultDiv = document.getElementById('tradeResult');
            const warningDiv = document.getElementById('calcWarning');
            
            if (buyPrice <= 0 || stopLoss <= 0 || targetPrice <= 0 || amount <= 0) {
                resultDiv.style.display = 'none';
                return;
            }
            
            resultDiv.style.display = 'block';
            
            const shares = Math.floor(amount / buyPrice);
            const riskPerShare = buyPrice - stopLoss;
            const lossAmount = riskPerShare * shares;
            const profitAmount = (targetPrice - buyPrice) * shares;
            const rRatio = lossAmount > 0 ? (profitAmount / lossAmount).toFixed(2) : 0;
            const currentCapital = getCurrentCapital();
            const accountRisk = ((lossAmount / currentCapital) * 100).toFixed(2);
            
            document.getElementById('calcShares').textContent = shares;
            document.getElementById('calcRisk').textContent = 'Â¥' + riskPerShare.toFixed(2);
            document.getElementById('calcLoss').textContent = '-Â¥' + lossAmount.toFixed(2);
            document.getElementById('calcProfit').textContent = '+Â¥' + profitAmount.toFixed(2);
            document.getElementById('calcR').textContent = rRatio + 'R';
            document.getElementById('calcRiskPct').textContent = accountRisk + '%';
            
            warningDiv.className = 'calculation-warning';
            
            if (parseFloat(accountRisk) > 1.5) {
                warningDiv.classList.add('danger');
                warningDiv.innerHTML = '<strong>âš ï¸ é£é™©è¿‡å¤§ï¼š' + accountRisk + '% è¶…è¿‡1.5%ï¼</strong>';
            } else if (parseFloat(rRatio) < 2) {
                warningDiv.classList.add('warning');
                warningDiv.innerHTML = '<strong>âš ï¸ ç›ˆäºæ¯”ï¼š' + rRatio + 'Rï¼Œæœªè¾¾2Rç›®æ ‡</strong>';
            } else {
                warningDiv.classList.add('success');
                warningDiv.innerHTML = '<strong>âœ… ä¼˜ç§€ï¼š' + rRatio + 'Rï¼Œå¯ä»¥å¼€ä»“ï¼</strong>';
            }
        }

        // æäº¤äº¤æ˜“
        function submitTrade() {
            console.log('submitTradeè¢«è°ƒç”¨');
            const name = document.getElementById('stockName').value;
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const stopLoss = parseFloat(document.getElementById('stopLoss').value);
            const actualTargetPrice = parseFloat(document.getElementById('actualTargetPrice').value) || 0;
            const profitLossAmount = parseFloat(document.getElementById('profitLossAmount').value) || 0;
            const amount = parseFloat(document.getElementById('investAmount').value);
            
            if (!name || !buyPrice || !stopLoss || !amount) {
                console.log('éªŒè¯å¤±è´¥: è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'); alert('âš ï¸ è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }
            
            const shares = Math.floor(amount / buyPrice);
            const currentCapital = getCurrentCapital();
            const positionPct = ((amount / currentCapital) * 100).toFixed(2);
            
            const trade = {
                id: Date.now(),
                date: new Date().toLocaleDateString('zh-CN'),
                code: name.substring(0, 6),
                name: name,
                buyPrice: buyPrice,
                shares: shares,
                cost: amount,
                currentPrice: buyPrice,
                stopLoss: stopLoss,
                actualTargetPrice: actualTargetPrice,
                profitLossAmount: profitLossAmount,
                positionPct: positionPct,
                status: 'holding'
            };
            
            trades.push(trade);
            console.log('äº¤æ˜“å·²æ·»åŠ :', trade);
            saveTrades();
            updateDisplay();
            updateChart();
            
            document.getElementById('stockName').value = '';
            document.getElementById('buyPrice').value = '';
            document.getElementById('stopLoss').value = '';
            document.getElementById('actualTargetPrice').value = '';
            document.getElementById('profitLossAmount').value = '';
            document.getElementById('investAmount').value = '';
            document.getElementById('tradeResult').style.display = 'none';
            
            alert('âœ… å·²æäº¤ï¼æ”¶ç›Šæ›²çº¿å·²æ›´æ–°');
        }

        // æ¸…ç©ºæ‰€æœ‰äº¤æ˜“
        function clearAllTrades() {
            if (confirm('âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰äº¤æ˜“è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                trades = [];
                saveTrades();
                updateDisplay();
                updateChart();
                alert('âœ… å·²æ¸…ç©ºæ‰€æœ‰äº¤æ˜“è®°å½•');
            }
        }

        // ç¼–è¾‘äº¤æ˜“
        function editTrade(id) {
            const trade = trades.find(t => t.id === id);
            if (!trade) return;
            
            // å¡«å……è¡¨å•
            document.getElementById('stockName').value = trade.name;
            document.getElementById('buyPrice').value = trade.buyPrice;
            document.getElementById('stopLoss').value = trade.stopLoss;
            document.getElementById('actualTargetPrice').value = trade.actualTargetPrice || '';
            document.getElementById('profitLossAmount').value = trade.profitLossAmount || '';
            document.getElementById('investAmount').value = trade.cost;
            
            // æ»šåŠ¨åˆ°è¡¨å•
            document.querySelector('.trade-form').scrollIntoView({ behavior: 'smooth' });
            
            // ä¸´æ—¶ä¿å­˜æ­£åœ¨ç¼–è¾‘çš„äº¤æ˜“ID
            window.editingTradeId = id;
            
            // æ›´æ”¹æäº¤æŒ‰é’®æ–‡æœ¬
            const submitBtn = document.querySelector('button[onclick="submitTrade()"]');
            submitBtn.textContent = 'ğŸ’¾ ä¿å­˜ä¿®æ”¹';
            submitBtn.onclick = saveEditedTrade;
        }

        // ä¿å­˜ç¼–è¾‘çš„äº¤æ˜“
        function saveEditedTrade() {
            const name = document.getElementById('stockName').value;
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const stopLoss = parseFloat(document.getElementById('stopLoss').value);
            const actualTargetPrice = parseFloat(document.getElementById('actualTargetPrice').value) || 0;
            const profitLossAmount = parseFloat(document.getElementById('profitLossAmount').value) || 0;
            const amount = parseFloat(document.getElementById('investAmount').value);
            
            if (!name || !buyPrice || !stopLoss || !amount) {
                alert('âš ï¸ è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }
            
            const tradeIndex = trades.findIndex(t => t.id === window.editingTradeId);
            if (tradeIndex === -1) {
                alert('âŒ æœªæ‰¾åˆ°è¦ç¼–è¾‘çš„äº¤æ˜“è®°å½•');
                return;
            }
            
            const shares = Math.floor(amount / buyPrice);
            const currentCapital = getCurrentCapital();
            const positionPct = ((amount / currentCapital) * 100).toFixed(2);
            
            // æ›´æ–°äº¤æ˜“è®°å½•
            trades[tradeIndex] = {
                ...trades[tradeIndex],
                name: name,
                buyPrice: buyPrice,
                shares: shares,
                cost: amount,
                stopLoss: stopLoss,
                actualTargetPrice: actualTargetPrice,
                profitLossAmount: profitLossAmount,
                positionPct: positionPct
            };
            
            saveTrades();
            updateDisplay();
            updateChart();
            
            // é‡ç½®è¡¨å•å’ŒæŒ‰é’®
            document.getElementById('stockName').value = '';
            document.getElementById('buyPrice').value = '';
            document.getElementById('stopLoss').value = '';
            document.getElementById('actualTargetPrice').value = '';
            document.getElementById('profitLossAmount').value = '';
            document.getElementById('investAmount').value = '';
            document.getElementById('tradeResult').style.display = 'none';
            
            // æ¢å¤æäº¤æŒ‰é’®
            const submitBtn = document.querySelector('button[onclick^="saveEditedTrade"]');
            submitBtn.textContent = 'âœ… æäº¤äº¤æ˜“è®¡åˆ’';
            submitBtn.onclick = submitTrade;
            
            delete window.editingTradeId;
            
            alert('âœ… äº¤æ˜“è®°å½•å·²æ›´æ–°ï¼');
        }

        // æ¸…ç©ºæ‰€æœ‰äº¤æ˜“
        function clearAllTrades() {
            if (confirm('âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰äº¤æ˜“è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                trades = [];
                saveTrades();
                updateDisplay();
                updateChart();
                alert('âœ… å·²æ¸…ç©ºæ‰€æœ‰äº¤æ˜“è®°å½•');
            }
        }

        // ç¼–è¾‘äº¤æ˜“
        function editTrade(id) {
            const trade = trades.find(t => t.id === id);
            if (!trade) return;
            
            // å¡«å……è¡¨å•
            document.getElementById('stockName').value = trade.name;
            document.getElementById('buyPrice').value = trade.buyPrice;
            document.getElementById('stopLoss').value = trade.stopLoss;
            document.getElementById('actualTargetPrice').value = trade.actualTargetPrice || '';
            document.getElementById('profitLossAmount').value = trade.profitLossAmount || '';
            document.getElementById('investAmount').value = trade.cost;
            
            // æ»šåŠ¨åˆ°è¡¨å•
            document.querySelector('.trade-form').scrollIntoView({ behavior: 'smooth' });
            
            // ä¸´æ—¶ä¿å­˜æ­£åœ¨ç¼–è¾‘çš„äº¤æ˜“ID
            window.editingTradeId = id;
            
            // æ›´æ”¹æäº¤æŒ‰é’®æ–‡æœ¬
            const submitBtn = document.querySelector('button[onclick="submitTrade()"]');
            submitBtn.textContent = 'ğŸ’¾ ä¿å­˜ä¿®æ”¹';
            submitBtn.onclick = saveEditedTrade;
        }

        // ä¿å­˜ç¼–è¾‘çš„äº¤æ˜“
        function saveEditedTrade() {
            const name = document.getElementById('stockName').value;
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const stopLoss = parseFloat(document.getElementById('stopLoss').value);
            const actualTargetPrice = parseFloat(document.getElementById('actualTargetPrice').value) || 0;
            const profitLossAmount = parseFloat(document.getElementById('profitLossAmount').value) || 0;
            const amount = parseFloat(document.getElementById('investAmount').value);
            
            if (!name || !buyPrice || !stopLoss || !amount) {
                alert('âš ï¸ è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }
            
            const tradeIndex = trades.findIndex(t => t.id === window.editingTradeId);
            if (tradeIndex === -1) {
                alert('âŒ æœªæ‰¾åˆ°è¦ç¼–è¾‘çš„äº¤æ˜“è®°å½•');
                return;
            }
            
            const shares = Math.floor(amount / buyPrice);
            const currentCapital = getCurrentCapital();
            const positionPct = ((amount / currentCapital) * 100).toFixed(2);
            
            // æ›´æ–°äº¤æ˜“è®°å½•
            trades[tradeIndex] = {
                ...trades[tradeIndex],
                name: name,
                buyPrice: buyPrice,
                shares: shares,
                cost: amount,
                stopLoss: stopLoss,
                actualTargetPrice: actualTargetPrice,
                profitLossAmount: profitLossAmount,
                positionPct: positionPct
            };
            
            saveTrades();
            updateDisplay();
            updateChart();
            
            // é‡ç½®è¡¨å•å’ŒæŒ‰é’®
            document.getElementById('stockName').value = '';
            document.getElementById('buyPrice').value = '';
            document.getElementById('stopLoss').value = '';
            document.getElementById('actualTargetPrice').value = '';
            document.getElementById('profitLossAmount').value = '';
            document.getElementById('investAmount').value = '';
            document.getElementById('tradeResult').style.display = 'none';
            
            // æ¢å¤æäº¤æŒ‰é’®
            const submitBtn = document.querySelector('button[onclick^="saveEditedTrade"]');
            submitBtn.textContent = 'âœ… æäº¤äº¤æ˜“è®¡åˆ’';
            submitBtn.onclick = submitTrade;
            
            delete window.editingTradeId;
            
            alert('âœ… äº¤æ˜“è®°å½•å·²æ›´æ–°ï¼');
        }

        function init() {
            document.getElementById('initialCapitalInput').value = initialCapital;
            updateDisplay();
            updateChart();
            updateWeekStats();
            loadChecklist();
            showSystemTips();
            
            // è‡ªåŠ¨è®¡ç®—è‚¡æ•°
            document.getElementById('buyAmount').addEventListener('input', calculateShares);
            document.getElementById('buyPrice').addEventListener('input', calculateShares);
            
            // åˆå§‹åŒ–å›¾è¡¨
            initChart();
        }

        // ä¿å­˜èµ·å§‹æœ¬é‡‘
        function saveInitialCapital() {
            const newCapital = parseFloat(document.getElementById('initialCapitalInput').value);
            
            if (isNaN(newCapital) || newCapital <= 0) {
                alert('âš ï¸ è¯·è¾“å…¥æœ‰æ•ˆçš„æœ¬é‡‘é‡‘é¢ï¼');
                return;
            }

            if (newCapital === initialCapital) {
                alert('âš ï¸ æ–°æœ¬é‡‘ä¸å½“å‰ç›¸åŒï¼Œæ— éœ€æ›´æ–°ï¼');
                return;
            }

            if (confirm(`ç¡®å®šè¦æ›´æ–°èµ·å§‹æœ¬é‡‘å—ï¼Ÿ\nå½“å‰ï¼šÂ¥${initialCapital.toLocaleString()}\næ–°å€¼ï¼šÂ¥${newCapital.toLocaleString()}\n\nâš ï¸ æ³¨æ„ï¼šæ›´æ–°åå°†é‡æ–°è®¡ç®—å‘¨èµ·å§‹èµ„é‡‘ã€‚`)) {
                initialCapital = newCapital;
                localStorage.setItem('initialCapital', newCapital);
                
                // é‡ç½®å‘¨èµ·å§‹èµ„é‡‘
                weekStartCapital = initialCapital;
                localStorage.setItem('weekStartCapital', weekStartCapital);
                
                // æ›´æ–°æ‰€æœ‰æ˜¾ç¤º
                updateDisplay();
                updateChart();
                updateWeekStats();
                
                alert('âœ… èµ·å§‹æœ¬é‡‘å·²æ›´æ–°ï¼\n\næ‰€æœ‰ç»Ÿè®¡æ•°æ®å·²é‡æ–°è®¡ç®—ã€‚');
            }
        }

        // è®¡ç®—è‚¡æ•°
        function calculateShares() {
            const amount = parseFloat(document.getElementById('buyAmount').value) || 0;
            const price = parseFloat(document.getElementById('buyPrice').value) || 0;
            
            if (price > 0) {
                const shares = Math.floor(amount / price);
                document.getElementById('shares').value = shares;
                
                // è®¡ç®—æ­¢æŸä»·
                const stopLoss = price * 0.92;
                document.getElementById('stopLoss').value = stopLoss.toFixed(2);
                
                // è®¡ç®—2Ræ­¢ç›ˆä»·æ ¼
                const profit2R = price * 2;
            }
        }

        // æ·»åŠ äº¤æ˜“
        function addTrade() {
            const code = document.getElementById('stockCode').value;
            const name = document.getElementById('stockName').value;
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const amount = parseFloat(document.getElementById('buyAmount').value);
            const shares = parseInt(document.getElementById('shares').value);
            const stopLoss = parseFloat(document.getElementById('stopLoss').value);

            if (!code || !name || !buyPrice || !amount || !shares) {
                console.log('éªŒè¯å¤±è´¥: è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'); alert('âš ï¸ è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼');
                return;
            }

            // æ£€æŸ¥å•ç¬”é£é™©
            const risk = amount * 0.08;
            const riskPercent = (risk / getCurrentCapital()) * 100;
            
            if (riskPercent > 1.5) {
                if (!confirm(`âš ï¸ å•ç¬”é£é™© ${riskPercent.toFixed(2)}% è¶…è¿‡1.5%å»ºè®®å€¼\nç¡®å®šè¦ä¹°å…¥å—ï¼Ÿ`)) {
                    return;
                }
            }

            const trade = {
                id: Date.now(),
                date: new Date().toLocaleDateString('zh-CN'),
                code: code,
                name: name,
                buyPrice: buyPrice,
                shares: shares,
                cost: amount,
                currentPrice: buyPrice,
                stopLoss: stopLoss,
                status: 'holding'
            };

            trades.push(trade);
            console.log('äº¤æ˜“å·²æ·»åŠ :', trade);
            saveTrades();
            updateDisplay();
            updateChart();
            updateWeekStats();
            clearForm();
        }

        // å–å‡º
        function sellTrade(id) {
            const trade = trades.find(t => t.id === id);
            if (!trade) return;

            const sellPrice = prompt(`å½“å‰æˆæœ¬ï¼š${trade.buyPrice}å…ƒ\nè¯·è¾“å…¥å–å‡ºä»·æ ¼ï¼š`, trade.currentPrice);
            if (sellPrice === null) return;

            const price = parseFloat(sellPrice);
            if (isNaN(price)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ä»·æ ¼ï¼');
                return;
            }

            // è®¡ç®—ç›ˆäºæ¯”R
            const pnl = (price - trade.buyPrice) * trade.shares;
            const pnlPercent = ((price - trade.buyPrice) / trade.buyPrice * 100).toFixed(2);
            const riskAmount = trade.cost * 0.08;
            const r_multiple = (pnl / riskAmount).toFixed(2);

            if (parseFloat(r_multiple) < 2) {
                if (!confirm(`âš ï¸ å½“å‰ç›ˆäºæ¯”ä»… ${r_multiple}Rï¼Œæœªè¾¾åˆ°2Rç›®æ ‡ï¼\nç¡®å®šè¦å–å‡ºå—ï¼Ÿ`)) {
                    return;
                }
            }

            if (confirm(`ç¡®å®šå–å‡ºå—ï¼Ÿ\nç›ˆäºï¼šÂ¥${pnl.toFixed(2)} (${pnlPercent}%)\nç›ˆäºæ¯”ï¼š${r_multiple}R`)) {
                trade.sellPrice = price;
                trade.sellDate = new Date().toLocaleDateString('zh-CN');
                trade.pnl = pnl;
                trade.pnlPercent = pnlPercent;
                trade.status = 'sold';
                
                saveTrades();
                updateDisplay();
                updateChart();
                updateWeekStats();
            }
        }

        // åˆ é™¤äº¤æ˜“
        function deleteTrade(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
                trades = trades.filter(t => t.id !== id);
                saveTrades();
                updateDisplay();
                updateChart();
                updateWeekStats();
            }
        }

        // å¿«é€Ÿæ›´æ–°ä»·æ ¼
        function quickUpdatePrice(id, price) {
            const trade = trades.find(t => t.id === id);
            if (trade) {
                trade.currentPrice = parseFloat(price);
                saveTrades();
                updateDisplay();
                updateChart();
                updateWeekStats();
            }
        }

        // è·å–å½“å‰å¸‚å€¼
        function getCurrentCapital() {
            let total = initialCapital;
            
            trades.forEach(trade => {
                if (trade.status === 'holding') {
                    total += (trade.currentPrice - trade.buyPrice) * trade.shares;
                } else if (trade.status === 'sold') {
                    total += trade.pnl;
                }
            });
            
            return total;
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            const currentCapital = getCurrentCapital();
            const totalPnL = currentCapital - initialCapital;
            const totalReturn = ((totalPnL / initialCapital) * 100).toFixed(2);
            const progress = Math.min(((currentCapital - 40000) / (200000 - 40000)) * 100, 100);

            document.getElementById('currentValue').textContent = `Â¥${currentCapital.toLocaleString()}`;
            
            const pnlElement = document.getElementById('totalPnL');
            pnlElement.textContent = `${totalPnL >= 0 ? '+' : ''}Â¥${totalPnL.toLocaleString()}`;
            pnlElement.className = 'stat-value ' + (totalPnL >= 0 ? 'positive' : 'negative');
            
            const returnElement = document.getElementById('totalReturn');
            returnElement.textContent = `${totalReturn}%`;
            returnElement.className = 'stat-value ' + (totalReturn >= 0 ? 'positive' : 'negative');
            
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressBar').textContent = `${progress.toFixed(1)}%`;

            // æ›´æ–°äº¤æ˜“åˆ—è¡¨
            const tradeList = document.getElementById('tradeList');
            tradeList.innerHTML = '';

            trades.forEach(trade => {
                const marketValue = trade.status === 'holding' 
                    ? trade.currentPrice * trade.shares 
                    : trade.sellPrice * trade.shares;
                const pnl = trade.status === 'sold' 
                    ? trade.pnl 
                    : (trade.currentPrice - trade.buyPrice) * trade.shares;
                const pnlPercent = trade.status === 'sold' 
                    ? trade.pnlPercent 
                    : ((trade.currentPrice - trade.buyPrice) / trade.buyPrice * 100).toFixed(2);

                const row = document.createElement('tr');
                row.style.cursor = 'pointer';
                row.ondblclick = () => editTrade(trade.id);
                row.title = 'åŒå‡»ç¼–è¾‘æ­¤äº¤æ˜“';
                row.innerHTML = `
                    <td>${trade.date}</td>
                    <td>${trade.code}</td>
                    <td>${trade.name}</td>
                    <td>Â¥${trade.buyPrice.toFixed(2)}</td>
                    <td>${trade.shares}</td>
                    <td>Â¥${trade.cost.toLocaleString()}</td>
                    <td style="text-align: center; color: var(--accent-cyan); font-weight: 600;">
                        ${trade.positionPct || '0.00'}%
                    </td>
                    <td>
                        ${trade.status === 'holding' 
                            ? `<input type="number" value="${trade.currentPrice}" 
                                style="width: 80px; padding: 6px 8px;"
                                onchange="quickUpdatePrice(${trade.id}, this.value)">` 
                            : `Â¥${trade.sellPrice.toFixed(2)}`}
                    </td>
                    <td>Â¥${marketValue.toLocaleString()}</td>
                    <td class="${pnl >= 0 ? 'positive' : 'negative'}">
                        ${pnl >= 0 ? '+' : ''}Â¥${pnl.toFixed(2)}
                    </td>
                    <td class="${pnlPercent >= 0 ? 'positive' : 'negative'}">
                        ${pnlPercent >= 0 ? '+' : ''}${pnlPercent}%
                    </td>
                    <td>
                        ${trade.status === 'holding' 
                            ? `<button class="btn btn-small" onclick="sellTrade(${trade.id})">å–å‡º</button>
                                <button class="btn btn-small" onclick="editTrade(${trade.id})" style="margin-left: 5px;">ç¼–è¾‘</button>
                                <button class="btn btn-danger" onclick="deleteTrade(${trade.id})" style="margin-left: 5px;">åˆ é™¤</button>`
                            : `<span style="color: var(--accent-green);">å·²å–å‡º</span>`}
                    </td>
                `;
                tradeList.appendChild(row);
            });
        }

        // åˆå§‹åŒ–å›¾è¡¨
        function initChart() {
            const ctx = document.getElementById('profitChart').getContext('2d');
            
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(63, 185, 80, 0.3)');
            gradient.addColorStop(1, 'rgba(57, 197, 207, 0.1)');

            profitChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'ç´¯è®¡æ”¶ç›Šç‡',
                        data: [],
                        borderColor: '#3fb950',
                        backgroundColor: gradient,
                        borderWidth: 2,
                        pointBackgroundColor: '#3fb950',
                        pointBorderColor: '#21262d',
                        pointBorderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        pointHoverBackgroundColor: '#58a6ff',
                        pointHoverBorderColor: '#21262d',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(22, 27, 34, 0.95)',
                            titleColor: '#c9d1d9',
                            bodyColor: '#c9d1d9',
                            borderColor: '#30363d',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `æ”¶ç›Šç‡: ${context.parsed.y}%`;
                                }
                            }
                        },
                        datalabels: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: '#21262d',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#8b949e',
                                font: {
                                    family: 'JetBrains Mono'
                                }
                            }
                        },
                        y: {
                            grid: {
                                color: '#21262d',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#8b949e',
                                callback: function(value) {
                                    return value + '%';
                                },
                                font: {
                                    family: 'JetBrains Mono'
                                }
                            }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const dataPoint = dailyData[index];
                            openModal(dataPoint.date, dataPoint.note || '', index);
                        }
                    },
                    onHover: (event, elements) => {
                        event.native.target.style.cursor = elements.length > 0 ? 'pointer' : 'default';
                    }
                }
            });
        }

        // æ›´æ–°å›¾è¡¨
        function updateChart() {
            // åˆå¹¶äº¤æ˜“å’Œæ¯æ—¥è®°å½•
            const combinedData = [...dailyData];
            
            // å¦‚æœæœ‰æ–°äº¤æ˜“ï¼Œè‡ªåŠ¨åˆ›å»ºå½“æ—¥è®°å½•
            const today = new Date().toLocaleDateString('zh-CN');
            if (!dailyData.find(d => d.date === today)) {
                const returnPercent = ((getCurrentCapital() - initialCapital) / initialCapital) * 100;
                dailyData.push({
                    date: today,
                    dailyReturn: returnPercent.toFixed(2),
                    note: ''
                });
                localStorage.setItem('dailyData', JSON.stringify(dailyData));
            } else {
                // æ›´æ–°ä»Šæ—¥æ”¶ç›Šç‡
                const todayIndex = dailyData.findIndex(d => d.date === today);
                if (todayIndex >= 0) {
                    dailyData[todayIndex].dailyReturn = ((getCurrentCapital() - initialCapital) / initialCapital * 100).toFixed(2);
                    localStorage.setItem('dailyData', JSON.stringify(dailyData));
                }
            }
            
            // æŒ‰æ—¥æœŸæ’åº
            combinedData.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            // è®¡ç®—ç´¯è®¡æ”¶ç›Š
            let runningReturn = 0;
            const labels = [];
            const data = [];
            
            combinedData.forEach(item => {
                labels.push(item.date);
                runningReturn = item.dailyReturn;
                data.push(runningReturn);
            });
            
            profitChart.data.labels = labels;
            profitChart.data.datasets[0].data = data;
            profitChart.update();
        }

        // æ‰“å¼€æ¨¡æ€æ¡†
        function openModal(date, note, index) {
            const modal = document.getElementById('noteModal');
            const textarea = document.getElementById('noteTextarea');
            const title = document.getElementById('modalTitle');
            
            title.textContent = `ğŸ“ ${date} - æ”¶ç›Šç‡ï¼š${dailyData[index].dailyReturn}%`;
            textarea.value = note || '';
            modal.classList.add('active');
            
            modal.dataset.date = date;
            modal.dataset.index = index;
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            const modal = document.getElementById('noteModal');
            modal.classList.remove('active');
        }

        // ä¿å­˜å¤‡æ³¨
        function saveNote() {
            const modal = document.getElementById('noteModal');
            const note = document.getElementById('noteTextarea').value;
            const date = modal.dataset.date;
            const index = parseInt(modal.dataset.index);
            
            if (index >= 0 && index < dailyData.length) {
                dailyData[index].note = note;
                localStorage.setItem('dailyData', JSON.stringify(dailyData));
            }
            
            closeModal();
            alert('âœ… å¤‡æ³¨å·²ä¿å­˜ï¼');
        }

        // æ›´æ–°å‘¨åº¦ç»Ÿè®¡
        function updateWeekStats() {
            const currentCapital = getCurrentCapital();
            const weekPnL = currentCapital - weekStartCapital;
            const weekReturn = ((weekPnL / weekStartCapital) * 100).toFixed(2);
            const weekTarget = ((weekPnL / (weekStartCapital * 0.035)) * 100).toFixed(1);

            if (document.getElementById('weekStart')) {
                document.getElementById('weekStart').textContent = `Â¥${weekStartCapital.toLocaleString()}`;
                
                const weekPnLElement = document.getElementById('weekPnL');
                weekPnLElement.textContent = `${weekPnL >= 0 ? '+' : ''}Â¥${weekPnL.toLocaleString()}`;
                weekPnLElement.className = 'stat-value ' + (weekPnL >= 0 ? 'positive' : 'negative');
                
                const weekReturnElement = document.getElementById('weekReturn');
                weekReturnElement.textContent = `${weekReturn}%`;
                weekReturnElement.className = 'stat-value ' + (weekReturn >= 0 ? 'positive' : 'negative');
                
                document.getElementById('weekTarget').textContent = `${weekTarget}%`;

                // å‘¨åº¦æé†’
                const weekAlert = document.getElementById('weekAlert');
                if (weekPnL < 0) {
                    weekAlert.innerHTML = '<div class="alert alert-danger">âš ï¸ æœ¬å‘¨äºæŸï¼Œè¯·æ§åˆ¶é£é™©ï¼</div>';
                } else if (parseFloat(weekReturn) < 3.5) {
                    weekAlert.innerHTML = '<div class="alert alert-warning">ğŸ“Š æœ¬å‘¨æ”¶ç›Šæœªè¾¾3.5%ç›®æ ‡ï¼Œç»§ç»­åŠªåŠ›ï¼</div>';
                } else {
                    weekAlert.innerHTML = '<div class="alert alert-success">ğŸ‰ æ­å–œï¼æœ¬å‘¨è¾¾æˆ3.5%æ”¶ç›Šç›®æ ‡ï¼</div>';
                }
            }
        }

        // æ¸…ç©ºè¡¨å•
        function clearForm() {
            document.getElementById('stockCode').value = '';
            document.getElementById('stockName').value = '';
            document.getElementById('buyPrice').value = '';
            document.getElementById('buyAmount').value = '';
            document.getElementById('shares').value = '';
            document.getElementById('stopLoss').value = '';
        }

        // ä¿å­˜æ•°æ®
        function saveTrades() {
            localStorage.setItem('trades', JSON.stringify(trades));
        }

        // æ£€æŸ¥æ¸…å•
        function toggleCheck(checkbox) {
            const item = checkbox.closest('.checklist-item');
            if (checkbox.checked) {
                item.classList.add('completed');
            } else {
                item.classList.remove('completed');
            }
            saveChecklist();
        }

        function saveChecklist() {
            const checks = {};
            for (let i = 1; i <= 10; i++) {
                checks[`check${i}`] = document.getElementById(`check${i}`).checked;
            }
            localStorage.setItem('checklist', JSON.stringify(checks));
        }

        function loadChecklist() {
            const checks = JSON.parse(localStorage.getItem('checklist')) || {};
            for (let i = 1; i <= 10; i++) {
                const checkbox = document.getElementById(`check${i}`);
                if (checkbox && checks[`check${i}`]) {
                    checkbox.checked = true;
                    checkbox.closest('.checklist-item').classList.add('completed');
                }
            }
        }

        function resetChecklist() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ¸…å•å—ï¼Ÿï¼ˆæ–°çš„ä¸€å¤©å¼€å§‹ï¼‰')) {
                for (let i = 1; i <= 10; i++) {
                    const checkbox = document.getElementById(`check${i}`);
                    checkbox.checked = false;
                    checkbox.closest('.checklist-item').classList.remove('completed');
                }
                saveChecklist();
            }
        }

        // æ˜¾ç¤ºç³»ç»Ÿæç¤º
        function showSystemTips() {
            const tips = [
                'ğŸ’¡ ä¿å®ˆæ–¹æ¡ˆï¼šå•ç¬”1-2%ï¼Œå‘¨æ”¶ç›Š3.5%ï¼Œå¹´æ”¶ç›Šçº¦182%',
                'ğŸ’¡ é«˜èƒœç‡ä¼˜å…ˆï¼šåªåšæœ€ç¡®å®šçš„HHä¹°ç‚¹',
                'ğŸ’¡ æˆäº¤é¢>10äº¿ï¼šæµåŠ¨æ€§å¥½ï¼Œè¿›å‡ºæ–¹ä¾¿',
                'ğŸ’¡ åŒæ—¶æŒä»“4-6åªï¼šåˆ†æ•£é£é™©ï¼Œé™ä½å›æ’¤',
                'ğŸ’¡ å¿«è¿›å¿«å‡ºï¼šæŒè‚¡1-3å¤©ï¼Œè¾¾æ ‡å°±èµ°',
                'ğŸ’¡ æ­¢æŸ-8%ï¼šå•ç¬”æœ€å¤§äºæŸ1%',
                'ğŸ’¡ å–å‡ºâ‰¥2Rï¼šç›ˆäºæ¯”è¾¾åˆ°2å€å†æ­¢ç›ˆ'
            ];
            
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            document.getElementById('systemAlert').innerHTML = `<div class="alert alert-success">${randomTip}</div>`;
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
